USE DEPDB

GO

		DECLARE	@RT20		Varchar(5)
		SELECT @RT20 ='N'

		IF EXISTS (SELECT 1 FROM	SYS.COLUMNS WHERE OBJECT_NAME(object_id) ='fw_req_activity_ilbo_task' and NAME='ActivityName')
		BEGIN
			SELECT @RT20 ='Y'
		END
	
---------------------------------------------
--insert into the fw_req_component_local_info


-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_req_component_local_info where ComponentName = 'basrepairorder')begininsert into fw_req_component_local_info(ComponentName,LangId,ComponentDesc,HelpFileName,ToolTipText,UpdUser,UpdTime) values('basrepairorder','1    ','Repair Order','','edk','9975',getdate())end


----------------------------------------------------
--Inserting data into table fw_req_process_component


----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_req_process_component where componentname = 'basrepairorder')begininsert into fw_req_process_component(ComponentName,ComponentDesc,ParentProcess,UpdUser,UpdTime,SequenceNo) values('basrepairorder','Repair Order','ELAL','9975',getdate(),1)end


-------------------------------------------
--Inserting data into table fw_req_activity


---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_req_activity where activityid = 91110628)begininsert into fw_req_activity(ActivityId,ActivityName,ActivityDesc,ComponentName,ActivityType,  
	ActivityPosition,ActivitySequence,IsWFEnabled,UpdUser,UpdTime,EDKActivity) values(91110628,'spares_cons_rept','Spares Consumption Report','basrepairorder',1,1,0,0,'DMUSER',getdate(),1)end


---------------------------------------
--Inserting data into table fw_req_task


-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_req_task where TaskName = 'GAEDK_SCP_FETCH')begininsert into fw_req_task(TaskName,TaskType,TaskDesc,UpdUser,UpdTime) values('GAEDK_SCP_FETCH','FETCH     ','FETCH','DMUSER',getdate())end


--------------------------------------------------------------------------------------------------------
--Inserting data into table fw_req_activity_ilbo_task GAEDK_SCP_FETCH


----------------------

IF	@RT20 ='N'
BEGIN


-------------
SELECT @RT20 


------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_req_activity_ilbo_task where activityid = 91110628and TaskName ='GAEDK_SCP_FETCH')begininsert into fw_req_activity_ilbo_task(ActivityId,ILBOCode,TaskName,UpdUser,UpdTime,DataSavingTask,LinkType,Taskconfirmation) values(91110628,'SPARESCONS_RPT','GAEDK_SCP_FETCH','DMUSER',getdate(),0,0,0)end


------------------

END
ELSE
BEGIN


-------------
SELECT @RT20 


-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
EXEC (' if not exists(select 1 from fw_req_activity_ilbo_task where activityid = 91110628 and TaskName =''GAEDK_SCP_FETCH'')beginINSERT INTO fw_req_activity_ilbo_task(ActivityId,ILBOCode,TaskName,UpdUser,UpdTime,DataSavingTask,LinkType,Taskconfirmation,ActivityName,ServiceName) VALUES(91110628,''SPARESCONS_RPT'',''GAEDK_SCP_FETCH'',''DMUSER'',getdate(),0,0,0,''spares_cons_rept'', 
					 Null)end')


----
END 


-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_req_task where TaskName = 'GAEDK_SCP_SPRE_CONS_GEN_RPT')begininsert into fw_req_task(TaskName,TaskType,TaskDesc,UpdUser,UpdTime) values('GAEDK_SCP_SPRE_CONS_GEN_RPT','REPORT    ','GENERATE REPORT','DMUSER',getdate())end


--------------------------------------------------------------------------------------------------------
--Inserting data into table fw_req_activity_ilbo_task GAEDK_SCP_SPRE_CONS_GEN_RPT


----------------------

IF	@RT20 ='N'
BEGIN


-------------
SELECT @RT20 


------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_req_activity_ilbo_task where activityid = 91110628and TaskName ='GAEDK_SCP_SPRE_CONS_GEN_RPT')begininsert into fw_req_activity_ilbo_task(ActivityId,ILBOCode,TaskName,UpdUser,UpdTime,DataSavingTask,LinkType,Taskconfirmation) values(91110628,'SPARESCONS_RPT','GAEDK_SCP_SPRE_CONS_GEN_RPT','DMUSER',getdate(),0,0,0)end


------------------

END
ELSE
BEGIN


-------------
SELECT @RT20 


-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
EXEC (' if not exists(select 1 from fw_req_activity_ilbo_task where activityid = 91110628 and TaskName =''GAEDK_SCP_SPRE_CONS_GEN_RPT'')beginINSERT INTO fw_req_activity_ilbo_task(ActivityId,ILBOCode,TaskName,UpdUser,UpdTime,DataSavingTask,LinkType,Taskconfirmation,ActivityName,ServiceName) VALUES(91110628,''SPARESCONS_RPT'',''GAEDK_SCP_SPRE_CONS_GEN_RPT'',''DMUSER'',getdate(),0,0,0,''spares_cons_rept'', 
					 Null)end')


----
END 


------------------------------------------------
--Inserting data into table fw_req_activity_ilbo


----------------------

IF	@RT20 ='N'
BEGIN


-------------
SELECT @RT20 


---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_req_activity_ilbo where activityid = 91110628 and  ilbocode = 'sparescons_rpt')begininsert into fw_req_activity_ilbo(ActivityId,ilbocode,UpdUser,UpdTime) values(91110628,'sparescons_rpt','DMUSER',getdate())end


---------------------------------------
--Inserting data into table fw_req_ilbo


------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_req_ilbo where ILBOCODE = 'sparescons_rpt')begininsert into fw_req_ilbo(ILBOCode,Description,ASPOFilePath,ProgID,StatusFlag,ILBOType,UpdUser,UpdTime) values('sparescons_rpt','Spares Consumption Report','','','0','4','DMUSER',getdate())end


------------------

END
ELSE
BEGIN


-------------
SELECT @RT20 


----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
EXEC ('if not exists(select 1 from fw_req_activity_ilbo where activityid = 91110628 and  ilbocode = ''sparescons_rpt'')begininsert into fw_req_activity_ilbo(ActivityId,ilbocode,UpdUser,UpdTime,ActivityName) values(91110628,''sparescons_rpt'',''DMUSER'',getdate(),''spares_cons_rept'')end')


---------------------------------------
--Inserting data into table fw_req_ilbo


------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_req_ilbo where ILBOCODE = 'sparescons_rpt')begininsert into fw_req_ilbo(ILBOCode,Description,ASPOFilePath,ProgID,StatusFlag,ILBOType,UpdUser,UpdTime) values('sparescons_rpt','Spares Consumption Report','','','0','4','DMUSER',getdate())end


----
END


------------------------------------------
--Inserting data into table fw_des_service


--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_des_service a where a. ServiceName =  'GAEDKSCPFETCH_SRV')begininsert into fw_des_service(ServiceName,ComponentName,ServiceType,IsIntegSer,StatusFlag,UpdUser,UpdTime) values('GAEDKSCPFETCH_SRV','basrepairorder',0,0,1,'DMUSER',getdate())end


--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_des_service a where a. ServiceName =  'GAEDKSCPSPRE_CREPORT_SRV')begininsert into fw_des_service(ServiceName,ComponentName,ServiceType,IsIntegSer,StatusFlag,UpdUser,UpdTime) values('GAEDKSCPSPRE_CREPORT_SRV','basrepairorder',0,0,1,'DMUSER',getdate())end


-----------------------------------------------------
--Inserting data into table fw_admin_Activity_Service


----------------------

IF	@RT20 ='N'
BEGIN


-------------
SELECT @RT20 


--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_admin_Activity_Service where activityid = 91110628 AND ServiceName = 'GAEDKSCPFETCH_SRV')begininsert into fw_admin_Activity_Service(ActivityId,ServiceName,UpdUser,UpdTime) values(91110628,'GAEDKSCPFETCH_SRV','DMUSER',getdate())end
if not exists(select 1 from fw_admin_Activity_Service where activityid = 91110628 AND ServiceName = 'GAEDKSCPSPRE_CREPORT_SRV')begininsert into fw_admin_Activity_Service(ActivityId,ServiceName,UpdUser,UpdTime) values(91110628,'GAEDKSCPSPRE_CREPORT_SRV','DMUSER',getdate())end


------------------
END
ELSE
BEGIN


-------------
SELECT @RT20 


---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
EXEC ('if not exists(select 1 from fw_admin_Activity_Service where activityid = 91110628 AND ServiceName = ''GAEDKSCPFETCH_SRV'')begininsert into fw_admin_Activity_Service(ActivityId,ServiceName,UpdUser,UpdTime,ActivityName) values(91110628,''GAEDKSCPFETCH_SRV'',''DMUSER'',getdate(),''spares_cons_rept'')end')
EXEC ('if not exists(select 1 from fw_admin_Activity_Service where activityid = 91110628 AND ServiceName = ''GAEDKSCPSPRE_CREPORT_SRV'')begininsert into fw_admin_Activity_Service(ActivityId,ServiceName,UpdUser,UpdTime,ActivityName) values(91110628,''GAEDKSCPSPRE_CREPORT_SRV'',''DMUSER'',getdate(),''spares_cons_rept'')end')


----
END


------------------------------------------------------
--Inserting data into table fw_req_activity_local_info


---------------------

IF	@RT20='N'
begin


-------------
SELECT @RT20 


----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_req_activity_local_info where activityid = 91110628)begininsert into fw_req_activity_local_info(ActivityId,LangId,ActivityDesc,HelpIndex,ToolTipText,UpdUser,UpdTime) values(91110628,1,'Spares Consumption Report',0,'edkact','DMUSER',getdate())end


----------------
END
ELSE
BEGIN


-------------
SELECT @RT20 


-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
EXEC ('if not exists(select 1 from fw_req_activity_local_info where activityid = 91110628)begininsert into fw_req_activity_local_info(ActivityId,LangId,ActivityDesc,HelpIndex,ToolTipText,UpdUser,UpdTime,ActivityName) values(91110628,1,''Spares Consumption Report'',0,''edkact'',''DMUSER'',getdate(),''spares_cons_rept'')end')


----
END


----------------------------------------------------------------
--Inserting data into table fw_req_activity_ilbo_task_local_info


---------------------

IF @RT20='N'
BEGIN


-------------
SELECT @RT20 


-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_req_activity_ilbo_task_local_info where activityid = 91110628 and ILBOCode = 'sparescons_rpt' and TaskName = 'GAEDK_SCP_FETCH')beginINSERT INTO fw_req_activity_ilbo_task_local_info ( ActivityId ,ILBOCode,ILBODescription,TaskName,TaskDesc,LangId,UpdUser,UpdTime)values(91110628,'SPARESCONS_RPT','Spares Consumption Report','GAEDK_SCP_FETCH','FETCH',1,'System',getdate())end


----------------
END
ELSE
BEGIN


-------------
SELECT @RT20 


--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
EXEC ('if not exists(select 1 from fw_req_activity_ilbo_task_local_info where activityid = 91110628 and ILBOCode = ''sparescons_rpt'' and TaskName = ''GAEDK_SCP_FETCH'')beginINSERT INTO fw_req_activity_ilbo_task_local_info ( ActivityId ,ILBOCode,ILBODescription,TaskName,TaskDesc,LangId,UpdUser,UpdTime,Activityname)values(91110628,''SPARESCONS_RPT'',''Spares Consumption Report'',''GAEDK_SCP_FETCH'',''FETCH'',1,''System'',getdate(),''spares_cons_rept'')end')


----
END


---------------------

IF @RT20='N'
BEGIN


-------------
SELECT @RT20 


-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
if not exists(select 1 from fw_req_activity_ilbo_task_local_info where activityid = 91110628 and ILBOCode = 'sparescons_rpt' and TaskName = 'GAEDK_SCP_SPRE_CONS_GEN_RPT')beginINSERT INTO fw_req_activity_ilbo_task_local_info ( ActivityId ,ILBOCode,ILBODescription,TaskName,TaskDesc,LangId,UpdUser,UpdTime)values(91110628,'SPARESCONS_RPT','Spares Consumption Report','GAEDK_SCP_SPRE_CONS_GEN_RPT','GENERATE REPORT',1,'System',getdate())end


----------------
END
ELSE
BEGIN


-------------
SELECT @RT20 


--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
EXEC ('if not exists(select 1 from fw_req_activity_ilbo_task_local_info where activityid = 91110628 and ILBOCode = ''sparescons_rpt'' and TaskName = ''GAEDK_SCP_SPRE_CONS_GEN_RPT'')beginINSERT INTO fw_req_activity_ilbo_task_local_info ( ActivityId ,ILBOCode,ILBODescription,TaskName,TaskDesc,LangId,UpdUser,UpdTime,Activityname)values(91110628,''SPARESCONS_RPT'',''Spares Consumption Report'',''GAEDK_SCP_SPRE_CONS_GEN_RPT'',''GENERATE REPORT'',1,''System'',getdate(),''spares_cons_rept'')end')


----
END

